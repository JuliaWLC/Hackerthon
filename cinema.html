<!DOCTYPE html>
<html>
<head>
  <title>Cinema Ticket Booking System</title>
  <style>
    .seat {
      display: inline-block;
      width: 50px;
      height: 50px;
      border: 1px solid black;
      margin: 5px;
      text-align: center;
      line-height: 50px;
      cursor: pointer;
    }
    .booked {
      background-color: red;
      cursor: not-allowed;
    }
    .selected {
      background-color: yellow;
    }
  </style>
</head>
<body>
  <h1>Cinema Ticket Booking System</h1>
  <div id="seats-container">
    <!-- Seats will be dynamically generated here -->
  </div>
  <button id="book-btn">Book Selected Seats</button>

  <script>
    const totalSeats = 30;
    const bookedSeats = new Set();
    let firstSelectedSeat = null;
    let lastSelectedSeat = null;

    function createSeatElement(seatNumber) {
      const seat = document.createElement('div');
      seat.className = 'seat';
      seat.innerText = seatNumber;
      seat.addEventListener('click', function() {
        if (bookedSeats.has(seatNumber)) {
          console.log('This seat is already booked. Please choose another one.');
          return;
        }

        if (firstSelectedSeat && !lastSelectedSeat) {
          lastSelectedSeat = seat;
          markSeatsInRange();
        } else {
          resetSelection();
          firstSelectedSeat = seat;
        }

        seat.classList.toggle('selected');
      });
      return seat;
    }

    function createSeats() {
      const seatsContainer = document.getElementById('seats-container');
      for (let i = 1; i <= totalSeats; i++) {
        const seat = createSeatElement(i);
        seatsContainer.appendChild(seat);
      }
    }

    function markSeatsInRange() {
      if (firstSelectedSeat && lastSelectedSeat) {
        const seats = document.getElementsByClassName('seat');
        let isWithinRange = false;

        for (let i = 0; i < seats.length; i++) {
          const seat = seats[i];

          if (seat === firstSelectedSeat || seat === lastSelectedSeat) {
            isWithinRange = !isWithinRange;
          }

          if (isWithinRange) {
            seat.classList.add('selected');
          }
        }
      }
    }

    function bookSelectedSeats() {
      const selectedSeats = document.getElementsByClassName('selected');
      if (selectedSeats.length === 0) {
        console.log('No seats selected. Please choose at least one seat.');
        return;
      }

      for (let i = 0; i < selectedSeats.length; i++) {
        const seat = selectedSeats[i];
        const seatNumber = parseInt(seat.innerText);
        bookedSeats.add(seatNumber);
        seat.className = 'seat booked';
        seat.removeEventListener('click', function() {});
      }

      console.log('Selected seats booked successfully.');
      // Reset selected seats after booking
      resetSelection();
    }

    function resetSelection() {
      firstSelectedSeat = null;
      lastSelectedSeat = null;
      const selectedSeats = document.getElementsByClassName('selected');
      while (selectedSeats.length > 0) {
        selectedSeats[0].classList.remove('selected');
      }
    }

    // Create seats when the page loads
    createSeats();

    // Add event listener to the book button
    const bookButton = document.getElementById('book-btn');
    bookButton.addEventListener('click', bookSelectedSeats);
  </script>
</body>
</html>
